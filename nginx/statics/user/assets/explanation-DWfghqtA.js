import{u,r as o,p as m,j as t}from"./index-ktjJghY_.js";import{u as x,q as p}from"./queryOptions-BbFtxskM.js";import{a as d}from"./api-client-CipG6Tld.js";import{C as f}from"./content-layout-DRKVCqtq.js";import{B as g}from"./button-BqE4EY_v.js";import{u as h}from"./next-yaNlURKo.js";import"./index-BV_IynQ4.js";const y=()=>{const s=localStorage.getItem("token");return s?d.post("/admin/game/start2",{},{headers:{"Content-Type":"application/json",Authorization:s}}):Promise.reject(new Error("Authorization token is missing"))},j=()=>p({queryKey:["status"],queryFn:y}),N=({queryConfig:s}={})=>x({...j(),...s}),_=()=>{const s=u(),[c,n]=o.useState(!1),a=N(),i=h({mutationConfig:{onSuccess:e=>{if(e!=null&&e.msg){const r=e.msg.NextNum;console.log(`NextNum: ${r}`)}else console.error("Response structure is incorrect or undefined")},onError:e=>{console.error("Error:",e)}}});o.useEffect(()=>{var e;((e=a.data)==null?void 0:e.msg)==="success"&&s(m.app.map.getHref(),{replace:!0})},[a.data,s]);const l=async()=>{var e;if(((e=a.data)==null?void 0:e.result)==="success")try{const r=await i.mutateAsync({data:{clear_floor:-1}});s("/app/map",{replace:!0,state:r})}catch(r){console.error("Error during floor mutation:",r)}else n(!0)};return t.jsx(f,{children:t.jsx("div",{className:"h-screen bg-[radial-gradient(circle_at_center,_#323232cc_0%,_#323232ff_100%)]",children:t.jsxs("div",{className:"mx-9 flex h-full flex-col items-center justify-center space-y-44 text-white",children:[t.jsxs("div",{className:"space-y-9 text-center",children:[t.jsx("p",{className:"text-2xl",children:"ECCダンジョンへようこそ"}),t.jsx("p",{className:"text-xl leading-12",children:"ここは古代の知識と謎が詰まった地下迷宮です。無数の試練と強敵が冒険者たちを待ち受けますが、その先には貴重な財宝と知恵が待っています。慎重な計画と迅速な判断を駆使して、ダンジョンの最奥を目指してください。"})]}),t.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[c&&t.jsx("div",{className:"text-[#FAFAFA]/50",children:"開始までしばらくお待ち下さい..."}),t.jsx(g,{children:"START",onClick:l})]})]})})})};export{_ as ExplanationRoute};
